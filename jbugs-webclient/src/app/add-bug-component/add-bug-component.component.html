<div class="container">
  <div class="jumbotron">

    <div class="row justify-content-center">

      <div class="col-md-6">
        <form #formControl="ngForm">
          <div class="form-group">
            <h4>{{"add-bug.title-page" | translate}}</h4>
            <label for="title">{{"add-bug.title" | translate}}</label>
            <input #titleElement="ngModel" name="title" id="title"  type="text" class="form-control" required [(ngModel)]="bug.title" minlength="3"/>
            <div class="err" *ngIf="titleElement.invalid && titleElement.touched">{{'add-bug.title-message' | translate}}</div>
          </div>
          <div class="form-group">
            <label for="description">{{"add-bug.description" | translate}}</label>
            <input #descriptionElement="ngModel" id="description" name="this" type="text" [(ngModel)]="bug.description" class="form-control"  minlength="3"/>
            <div class="err" *ngIf="descriptionElement.invalid && descriptionElement.touched">{{'add-bug.title-message' | translate}}</div>
          </div>

          <div class="form-group">
            <label for="version">{{"add-bug.version" | translate}}</label>
            <input disabled id="version" name="version" type="text" [(ngModel)]="bug.version" class="form-control" required minlength="3"/>
          </div>
          <div class="form-group">
            <label for="fversion">{{"add-bug.fixed-version" | translate}}</label>
            <input disabled id="fversion" name="fversion" type="text"  [(ngModel)]="bug.fixedVersion" class="form-control" required minlength="3"/>
          </div>
          <div class="form-group">
            <label for="severity">{{"add-bug.severity" | translate}}</label>
            <select #severityElement="ngModel" name="severity" id="severity" [(ngModel)]="this.chosenSeverity" class="form-control" (ngModelChange)="changedSelected(this.chosenSeverity)" required>
              <option disabled [ngValue]="undefined">Select severity</option>
              <option *ngFor="let severity of this.severity" [ngValue]="severity">{{severity}}</option>
            </select>
            <div class="err" *ngIf="severityElement.invalid && severityElement.touched">{{"add-bug.severity-message" | translate}}</div>
          </div>

          <div class="form-group">
            <label for="date">{{"add-bug.target-date" | translate}}</label>
            <br/>
            <input #targetElement="ngModel" type="date" id="date" name="chosenDate"
                   [(ngModel)]="this.chosenDate" (ngModelChange)="changedSelectedUsername()" min="{{this.currentDate | date:'yyyy-MM-dd'}}"
                    max="2030-12-31" required/>
            <div class="err" *ngIf="targetElement.invalid && targetElement.touched">{{"add-bug.target-date-message" | translate}}</div>
          </div>
          <div class="form-group">
            <label for="createdby">{{"add-bug.created-by" | translate}}</label>
            <input disabled id="createdBy" name="createdBy" type="text"  value = "doreld"  class="form-control" required minlength="3"/>
          </div>
          <div class="form-group">
            <label for="assignedTo">{{"add-bug.assigned-to" | translate}}</label>
            <select #assignedElement="ngModel" name="assignedTo" id="assignedTo"  class="form-control"  [(ngModel)]="this.chosenUsername" (ngModelChange)="changedSelectedUsername()" required>
              <option disabled [ngValue]="undefined">{{"add-bug.select-user" | translate}}</option>
              <option *ngFor="let username of this.allUsers" [ngValue]="username.username">{{username.username}}</option>
            </select>
            <div class="err" *ngIf="assignedElement.invalid && assignedElement.touched">{{"add-bug.assigned-to-message" | translate}}</div>
          </div>
          <div class="form-group">
            <label for="status">{{"add-bug.status" | translate}}</label>
            <input disabled id="status" name="status" type="text"  [(ngModel)]="bug.status" class="form-control"/>
          </div>
          <div class="form-group">
            <label for="blob">{{"add-bug.attachment" | translate}}</label>
            <br/>
            <input #inputElement type="file" id="blob" name="file" [(ngModel)]="this.attachment.blob"  required (change)="fileChange($event)" accept="file_extension|audio/*|video/*|image/*|media_type" multiple >
            <div *ngFor="let name of this.chosenFiles">
              {{name}}
            </div>
          </div>

          <div class="form-group">
            <button class="btn btn-primary" type="submit" [disabled]="formControl.invalid" (click)="onSubmit()">{{"add-bug.btn-register" | translate}}
            </button>
          </div>
        </form>
      </div>
    </div>
  </div>
</div>
